<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MoodFlow â€“ Todo List</title>
<style>
   /* ===== Navbar ===== */
  .nav { width: 100%; background: linear-gradient(90deg, rgba(173,216,230,0.7), rgba(135,206,250,0.7)); box-shadow: 0 6px 20px rgba(0,0,0,0.08); position: sticky; top: 0; z-index: 50; backdrop-filter: blur(6px); transition: background 0.3s ease; }
  .nav-inner { max-width:1100px; margin:0 auto; padding:12px 20px; display:flex; align-items:center; justify-content:space-between; gap:20px; direction:ltr; }
  .logo { font-weight:900; letter-spacing:1px; font-size:40px; color: rgba(135,206,250,0.7); flex-shrink:0; display:flex; align-items:center; gap:8px; }
   .logo img {width: 40px; height: 40px; border-radius: 50%; object-fit: cover;}
  .nav-links { display:flex; gap:20px; list-style:none; margin:0; padding:0; flex-grow:1; justify-content:center; }
  .nav-link { color:#fff; text-decoration:none; font-weight:600; padding:8px 12px; border-radius:8px; transition:0.3s; }
  .nav-link:hover { background: rgba(255,255,255,0.12); }
  .nav-right { display:flex; align-items:center; gap:12px; }
  .nav-start-btn { background: #00bfff; color:#fff; font-weight:700; padding:10px 16px; border:none; border-radius:8px; cursor:pointer; transition:0.3s; }
  .nav-start-btn:hover { background:#0099cc; }
  #language-select { padding:6px 10px; border-radius:8px; border:none; font-weight:600; background: rgba(255,255,255,0.12); color:#fff; cursor:pointer; transition:0.3s; }
  #language-select:focus { outline:none; }

:root {
  --primary-500: #6a4fe6;
  --card-bg: #ffffff;
  --surface: #f7f7fb;
  --task-bg: #f0f0ff;
  --task-bg-dark: #2a2a3a;
}
* { box-sizing: border-box; }
body { margin:0; font-family:Tahoma,Segoe UI,Roboto,sans-serif; background:var(--surface); color:#222; }
.container { max-width:800px; margin:40px auto; padding:20px; }
h1 { color:var(--primary-500); text-align:center; }
.task { background:var(--task-bg); padding:10px 15px; margin:10px 0; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.08); display:flex; justify-content: space-between; align-items: center; }
.task-circle {
  width: 20px;
  height: 20px;
  border: 2px solid var(--primary-500);
  border-radius: 50%;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  color: white;
  transition: all 0.3s;
}

.task.completed .task-circle {
  background: var(--primary-500);
  border-color: var(--primary-500);
}

.task span {
  flex-grow: 1;
}
button { padding:6px 10px; margin-left:5px; border:none; border-radius:6px; cursor:pointer; }
button.complete { background:#6a4fe6; color:#fff; }
button.remove { background:#e64a4a; color:#fff; }
input { padding:8px; width:60%; border-radius:6px; border:1px solid #ccc; }
</style>
</head>
<body>
  <!-- ===== Navbar ===== -->
<nav class="nav">
  <div class="nav-inner">
    <div class="logo" aria-label="MoodFlow logo">
      <img src="logo.jpg.jpeg" width="600" height="600"/>
      <span style="color:  #007BFF; font-size: 20px; font-weight: bold;">MoodFlow</span>
    </div>
    <ul class="nav-links" role="menubar" aria-label="Main menu">
      <li role="none"><a role="menuitem" href="index.html" class="nav-link" data-lang-key="home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
      <li role="none"><a role="menuitem" href="questions.html" class="nav-link" data-lang-key="mood">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø²Ø§Ø¬</a></li>
      <li role="none"><a role="menuitem" href="todo.html" class="nav-link" data-lang-key="todo">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</a></li>
      <li role="none"><a role="menuitem" href="premium.html" class="nav-link" data-lang-key="premium">Premium</a></li>
    </ul>
    <div class="nav-right">
      <button class="nav-start-btn" onclick="window.location.href='questions.html'" data-lang-key="start_btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>

      <label for="language-select" class="visually-hidden"></label>
      <select id="language-select" aria-label="Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©">
        <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
        <option value="en">English</option>
        <option value="fr">FranÃ§ais</option>
      </select>
    </div>
  </div>
</nav>
<div class="container">
  
  <div id="tasks"></div>
</div>

<script>
 // ===== Language =====
  const languageSelect = document.getElementById("language-select");
  const translations = {
    ar: { home:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", mood:"ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø²Ø§Ø¬", todo:"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…", premium:"Premium",
          hero_title:"Ù†Ø¸Ù‘Ù… ÙŠÙˆÙ…Ùƒ Ø­Ø³Ø¨ Ù…Ø²Ø§Ø¬Ùƒ", hero_text:"Ø­Ù„Ù‘Ù„ Ø­Ø§Ù„ØªÙƒ Ø§Ù„Ù†ÙØ³ÙŠØ© Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù†ØµØ§Ø¦Ø­ ÙˆØªÙ…Ø§Ø±ÙŠÙ† ØªÙ†Ø§Ø³Ø¨Ùƒ.",
          start_btn:"Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±", mood_title:"Ø§Ø®ØªØ§Ø± Ø§Ù„Ù…Ø²Ø§Ø¬ ØªØ§Ø¹Ùƒ:", sad:"Ø­Ø²ÙŠÙ†", angry:"Ù…Ø¹ØµÙ‘Ø¨", sleepy:"Ù†Ø¹Ø³Ø§Ù†", normal:"Ø¹Ø§Ø¯ÙŠ", energy:"Ø·Ø§Ù‚Ø©",
          feature1:"ğŸ” ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø²Ø§Ø¬", feature2:"ğŸ“ Ù…Ù‡Ø§Ù… ÙŠÙˆÙ…ÙŠØ©", feature3:"ğŸ§ ØµÙˆØªÙŠØ§Øª Ù…Ù‡Ø¯Ù‘Ø¦Ø©", feature4:"ğŸ‘¤ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø²Ø§Ø¬ Ù…Ù† Ø§Ù„ÙˆØ¬Ù‡ (Ù‚Ø±ÙŠØ¨Ù‹Ø§)"
    },
    en: { home:"Home", mood:"Mood Analysis", todo:"To-Do List", premium:"Premium",
          hero_title:"Organize your day according to your mood", hero_text:"Analyze your mood today and get tips & exercises.",
          start_btn:"Start Test", mood_title:"Choose your mood:", sad:"Sad", angry:"Angry", sleepy:"Sleepy", normal:"Normal", energy:"Energy",
          feature1:"Mood Analysis", feature2:"Daily Tasks", feature3:"Relaxing Audios", feature4:"Face Mood Detection (Soon)"
    },
    fr: { home:"Accueil", mood:"Analyse de l'humeur", todo:"To-Do List", premium:"Premium",
          hero_title:"Organisez votre journÃ©e selon votre humeur", hero_text:"Analysez votre humeur aujourd'hui et obtenez des conseils & exercices.",
          start_btn:"Commencer le test", mood_title:"Choisissez votre humeur :", sad:"Triste", angry:"En colÃ¨re", sleepy:"FatiguÃ©", normal:"Normal", energy:"Ã‰nergie",
          feature1:"Analyse de l'humeur", feature2:"TÃ¢ches quotidiennes", feature3:"Audios relaxants", feature4:"Analyse de l'humeur par visage (BientÃ´t)"
    }
  };

  function setLanguage(lang) {
    document.querySelectorAll("[data-lang-key]").forEach(el => {
      const key = el.getAttribute("data-lang-key");
      if(translations[lang] && translations[lang][key]){
        el.textContent = translations[lang][key];
      }
    });
    localStorage.setItem("selectedLanguage", lang);
  }

  const savedLang = localStorage.getItem("selectedLanguage") || "ar";
  languageSelect.value = savedLang;
  setLanguage(savedLang);
  languageSelect.addEventListener("change", (e) => setLanguage(e.target.value));

// ===== Ø§Ù„Ù„ØºØ© ÙˆØ§Ù„Ù…Ø²Ø§Ø¬ =====
const lang = localStorage.getItem('selectedLanguage') || 'ar';
document.documentElement.lang = lang;
document.documentElement.dir = (lang==='ar'? 'rtl':'ltr');

const storedMood = localStorage.getItem('userMood') || 'Normal';
const moodMap = {
  "Ø¹Ø§Ø¯ÙŠ":"Normal","Ø·Ø§Ù‚Ø©":"Energy","Ø­Ø²ÙŠÙ†":"Sad","Ù…Ø¹ØµÙ‘Ø¨":"Angry","Ù†Ø¹Ø³Ø§Ù†":"Sleepy",
  "Normal":"Normal","Energy":"Energy","Sad":"Sad","Angry":"Angry","Sleepy":"Sleepy"
};
const mood = moodMap[storedMood] || 'Normal';

// ===== Ù…Ù‡Ø§Ù… Ø¬Ø§Ù‡Ø²Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø²Ø§Ø¬ ÙˆØ§Ù„Ù„ØºØ© =====
const defaultTasks = {
  ar: {
    Sad: [
      "Ø§Ù‚Ø±Ø£ 5 ØµÙØ­Ø§Øª Ù…Ù† ÙƒØªØ§Ø¨ ØªØ­ÙÙŠØ²ÙŠ Ù„ØªØ¹Ø²ÙŠØ² Ø§Ù„ØªÙØ§Ø¤Ù„",
      "Ø¯ÙˆÙ‘Ù† Ø«Ù„Ø§Ø« Ø£Ù…ÙˆØ± ØªØ´ÙƒØ± Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡Ø§ Ø§Ù„ÙŠÙˆÙ… ÙÙŠ Ø¯ÙØªØ± Ø®Ø§Øµ",
      "Ø®Ø·Ø· Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ… Ø¨Ø´ÙƒÙ„ ÙˆØ§Ø¹Ù Ù…Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø£ÙˆÙ„ÙˆÙŠØ§Øª ÙˆØ§Ø¶Ø­Ø©",
      "Ø§Ø³ØªÙ…Ø¹ Ù„Ù…Ù‚Ø·Ø¹ ØµÙˆØªÙŠ Ù‡Ø§Ø¯Ø¦ Ø£Ùˆ ØªÙ„Ø§ÙˆØ© Ù‚Ø±Ø¢Ù†ÙŠØ© Ù„ØªØµÙÙŠØ© Ø§Ù„Ø°Ù‡Ù†"
    ],
    Angry: [
      "Ø§Ù…Ø´Ù Ø£Ùˆ Ù…Ø§Ø±Ø³ Ø±ÙŠØ§Ø¶Ø© Ø®ÙÙŠÙØ© Ù„Ù…Ø¯Ø© 15 Ø¯Ù‚ÙŠÙ‚Ø© Ù„ØªÙØ±ÙŠØº Ø§Ù„ØªÙˆØªØ± Ø¨Ø·Ø±ÙŠÙ‚Ø© ÙˆØ§Ø¹ÙŠØ©",
      "Ø§ÙƒØªØ¨ Ù…Ø§ ÙŠØºØ¶Ø¨Ùƒ Ø«Ù… Ø­Ø±Ù‘Ø±Ù‡ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ±Ù‚ Ù„Ù„ØªØ®Ù„Øµ Ù…Ù† Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø³Ù„Ø¨ÙŠØ©",
      "Ø®ØµØµ 10 Ø¯Ù‚Ø§Ø¦Ù‚ Ù„ØªØ¯ÙˆÙŠÙ† Ø­Ù„ÙˆÙ„ Ø¹Ù…Ù„ÙŠØ© Ù„Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„ØªÙŠ Ø£ØºØ¶Ø¨ØªÙƒ Ø¯ÙˆÙ† Ø§Ù†ÙØ¹Ø§Ù„",
      "Ø§Ø³ØªÙ…Ø¹ Ù„Ø®Ø·Ø§Ø¨ ØªØ­ÙÙŠØ²ÙŠ Ø£Ùˆ Ù…Ù‚Ø·Ø¹ ØµÙˆØªÙŠ Ù…Ù‡Ø¯Ø¦ Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø´Ø§Ø¹Ø±"
    ],
    Sleepy: [
      "Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙŠÙˆÙ… Ø¨ÙƒÙˆØ¨ Ù…Ø§Ø¡ Ø£Ùˆ Ù…Ø´Ø±ÙˆØ¨ ÙŠØ­ÙØ² Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø°Ù‡Ù†ÙŠ",
      "Ù‚Ù… Ø¨ØªÙ…Ø§Ø±ÙŠÙ† ØªÙ†Ø´ÙŠØ·ÙŠØ© Ù‚ØµÙŠØ±Ø© Ù„ØªÙ†Ø´ÙŠØ· Ø§Ù„Ø¬Ø³Ù… ÙˆØ§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø°Ù‡Ù†ÙŠ",
      "Ø§Ù‚Ø±Ø£ Ù‚Ø±Ø¢Ù† Ø£Ùˆ Ù†Øµ Ù‚ØµÙŠØ± ÙŠØ­ÙØ² Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø°Ù‡Ù†ÙŠ",
      "Ø§Ø³ØªÙ…Ø¹ Ù„Ø¨ÙˆØ¯ÙƒØ§Ø³Øª ØªØ­ÙÙŠØ²ÙŠ Ø£Ùˆ Ù‚Ø±Ø§Ø¡Ø© Ù‚ØµÙŠØ±Ø© ØªÙ…Ù†Ø­ Ø§Ù„Ø·Ø§Ù‚Ø© ÙˆØ§Ù„ØªØ±ÙƒÙŠØ²"
    ],
    Normal: [], Energy: []
  },
  en: {
    Sad: [
      "Read 5 pages of a motivational book to boost positivity",
      "Write three things you are grateful for today in a journal",
      "Plan today's tasks mindfully with clear priorities",
      "Listen to a calm audio or Quran recitation to clear your mind"
    ],
    Angry: [
      "Walk or do light exercise for 15 minutes to release tension",
      "Write down what makes you angry and release it on paper",
      "Spend 10 minutes writing practical solutions to frustrating situations",
      "Listen to a motivational speech or calming audio to manage emotions"
    ],
    Sleepy: [
      "Start the day with water or a drink that boosts mental alertness",
      "Do short activation exercises to energize body and mind",
      "Read Quran or a short stimulating text",
      "Listen to a motivational podcast or short reading to boost focus"
    ],
    Normal: [], Energy: []
  },
  fr: {
    Sad: [
      "Lisez 5 pages dâ€™un livre motivant pour renforcer le positivisme",
      "Notez trois choses pour lesquelles vous Ãªtes reconnaissant aujourd'hui",
      "Planifiez vos tÃ¢ches de maniÃ¨re consciente avec des prioritÃ©s claires",
      "Ã‰coutez un audio calme ou une rÃ©citation du Coran pour clarifier l'esprit"
    ],
    Angry: [
      "Marchez ou faites un exercice lÃ©ger de 15 minutes pour libÃ©rer la tension",
      "Ã‰crivez ce qui vous met en colÃ¨re puis libÃ©rez-le sur papier",
      "Consacrez 10 minutes Ã  Ã©crire des solutions pratiques pour les situations frustrantes",
      "Ã‰coutez un discours motivant ou un audio apaisant pour gÃ©rer les Ã©motions"
    ],
    Sleepy: [
      "Commencez la journÃ©e avec de l'eau ou une boisson stimulant l'esprit",
      "Faites de courts exercices pour activer le corps et l'esprit",
      "Lisez le Coran ou un texte court stimulant",
      "Ã‰coutez un podcast motivant ou une lecture courte pour booster la concentration"
    ],
    Normal: [], Energy: []
  }
};

// ===== ØªØ­Ø¯ÙŠØ¯ autoMode =====
const params = new URLSearchParams(window.location.search);


// ===== ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù‡Ø§Ù… =====
let tasks = [];
let autoMode = false; // Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Ù…Ù‡Ø§Ù… Ø¬Ø§Ù‡Ø²Ø©

if (mood === "Sad" || mood === "Angry" || mood === "Sleepy") {
  // Ù‡Ù†Ø§Ùƒ Ù…Ù‡Ø§Ù… Ø¬Ø§Ù‡Ø²Ø©
  autoMode = true;
  if (defaultTasks[lang][mood] && defaultTasks[lang][mood].length > 0) {
    tasks = defaultTasks[lang][mood].map(t => ({ text: t, completed: false }));
  }
} else {
  // Ø§Ù„Ù…Ø²Ø§Ø¬ Normal Ø£Ùˆ Energy -> Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… Ø¬Ø§Ù‡Ø²Ø©
  autoMode = false;
  tasks = [];
}



// ===== Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØ¯ÙˆÙ„ÙŠØ³Øª =====
const container = document.getElementById('tasks');

function renderTasks(){
  container.innerHTML = '';
  tasks.forEach((t,i)=>{
    const div = document.createElement('div');
    div.className = 'task';
    if(t.completed) div.classList.add('completed');

   div.innerHTML = `
  <div class="task-circle">${t.completed ? 'âœ”' : ''}</div>
  <span>
  ${t.text}
  ${t.duration ? `<small style="color:gray;"> (${t.duration} Ø¯)</small>` : ''}
</span>

   `;


    // Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‡Ù…Ø©ØŒ ÙŠØªÙ… ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© "ØªÙ…"
    div.addEventListener('click', () => {
      tasks[i].completed = !tasks[i].completed;
      renderTasks();
    });

    container.appendChild(div);
  });

  if(!autoMode){
    const inputDiv = document.createElement('div');
    inputDiv.style.marginTop='15px';
  inputDiv.innerHTML = `
  <input id="newTask" placeholder="${lang==='ar'?'Ø£Ø¶Ù Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©' : lang==='fr'?'Ajouter une tÃ¢che':'Add a new task'}" />
  <input id="taskDuration" type="number" placeholder="${lang==='ar'?'Ø§Ù„Ù…Ø¯Ø© Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚':'Duration (min)'}" min="1" style="width:80px;" />
  <button onclick="addTask()">${lang==='ar'?'Ø£Ø¶Ù' : lang==='fr'?'Ajouter':'Add'}</button>
`;

    container.appendChild(inputDiv);
  }
}

function addTask(){
  const val = document.getElementById('newTask').value.trim();
  const durationInput = document.getElementById('taskDuration');
  const duration = parseInt(durationInput.value);

  if(val){
    tasks.push({
      text: val,
      completed: false,
      duration: duration || 5 // Ù…Ø¯Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙÙ‚Ø· Ù„Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙŠ ÙŠØ¯Ø®Ù„Ù‡Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    });

    // ØªØ±ØªÙŠØ¨: ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø© Ø£ÙˆÙ„Ù‹Ø§ Ø«Ù… Ø§Ù„Ø£Ù‚ØµØ± Ù…Ø¯Ø©
    tasks.sort((a,b) => {
      if(a.completed !== b.completed) return a.completed - b.completed;
      return (a.duration || 9999) - (b.duration || 9999);
    });
  }

  document.getElementById('newTask').value = '';
  durationInput.value = '';
  renderTasks();
}




function completeTask(i){
  alert(lang==='ar'?'ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ù‡Ù…Ø©.':lang==='fr'?'FÃ©licitations! TÃ¢che terminÃ©e.':'Congratulations! Task completed.');
  tasks.splice(i,1);
  renderTasks();
}

function removeTask(i){
  tasks.splice(i,1);
  renderTasks();
}



renderTasks();
</script>
</body>
</html>
